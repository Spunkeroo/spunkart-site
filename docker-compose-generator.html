<!DOCTYPE html>
<html lang="en">
<head>
<!-- Copyright 2026 SpunkArt.com. All rights reserved. Unauthorized reproduction prohibited. hello@spunkart.com -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Docker Compose Generator — Visual YAML Builder | SPUNKART.COM</title>
<meta name="description" content="Free Docker Compose YAML generator. Pick services like nginx, postgres, redis, node, python. Configure ports, volumes, environment variables. Generate and download docker-compose.yml instantly.">
<meta property="og:title" content="Docker Compose Generator — Visual YAML Builder | SPUNKART.COM">
<meta property="og:description" content="Build docker-compose.yml visually. Pick services, configure ports and volumes, generate YAML. Free online tool.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://spunkart.com/docker-compose-generator.html">
<meta property="og:image" content="https://spunkart.com/og-docker-compose-generator.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@SpunkArt13">
<meta name="twitter:title" content="Docker Compose Generator — YAML Builder | SPUNKART.COM">
<meta name="twitter:description" content="Build docker-compose.yml visually. Pick services, configure ports, generate YAML. Free online tool.">
<link rel="canonical" href="https://spunkart.com/docker-compose-generator.html">
<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GVNL11PEGP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-GVNL11PEGP');</script>
<!-- Clarity -->
<script type="text/javascript">(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window,document,"clarity","script","pn0x1z2y3w");</script>
<meta name="author" content="SpunkArt.com">
<meta name="copyright" content="Copyright 2026 SpunkArt.com. All rights reserved.">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#0a0a0a;color:#e8e8e8;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;line-height:1.6;min-height:100vh;display:flex;flex-direction:column;}
a{color:#ff5f1f;text-decoration:none;}
a:hover{text-decoration:underline;}

nav{background:#111;border-bottom:1px solid #222;padding:12px 20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;position:sticky;top:0;z-index:100;}
.nav-brand{font-weight:700;font-size:1.1rem;color:#ff5f1f;}
.nav-links{display:flex;gap:20px;font-size:0.9rem;}
.nav-links a{color:#aaa;transition:color .2s;}
.nav-links a:hover{color:#ff5f1f;}
.watermark{position:fixed;bottom:10px;right:15px;font-size:0.7rem;color:rgba(255,95,31,0.15);font-weight:700;letter-spacing:2px;pointer-events:none;z-index:10;}

main{flex:1;max-width:1100px;width:100%;margin:0 auto;padding:30px 20px;}
h1{font-size:2rem;font-weight:700;margin-bottom:8px;}
h1 span{color:#ff5f1f;}
.subtitle{color:#888;margin-bottom:30px;font-size:1rem;}

.section{background:#111;border:1px solid #222;border-radius:10px;padding:24px;margin-bottom:20px;}
.section h2{font-size:1.1rem;margin-bottom:16px;color:#ccc;}

.service-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px;margin-bottom:20px;}
.service-card{background:#1a1a1a;border:1px solid #2a2a2a;border-radius:10px;padding:16px;text-align:center;cursor:pointer;transition:all .2s;user-select:none;}
.service-card:hover{border-color:#444;transform:translateY(-2px);}
.service-card.active{background:#1a1208;border-color:#ff5f1f;box-shadow:0 0 12px rgba(255,95,31,0.15);}
.service-card .icon{font-size:2rem;margin-bottom:8px;}
.service-card .name{font-size:0.9rem;font-weight:600;color:#ccc;}
.service-card.active .name{color:#fff;}
.service-card .desc{font-size:0.7rem;color:#555;margin-top:4px;}

.active-services{margin-bottom:20px;}
.service-config{background:#1a1a1a;border:1px solid #2a2a2a;border-radius:10px;padding:20px;margin-bottom:12px;}
.service-config-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;}
.service-config-header h3{font-size:1rem;color:#ff5f1f;font-weight:600;}
.service-config-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}

.input-group{margin-bottom:0;}
.input-group label{display:block;font-size:0.8rem;color:#888;margin-bottom:4px;}
.input-group input,.input-group select{width:100%;padding:8px 12px;background:#0d0d0d;border:1px solid #2a2a2a;border-radius:6px;color:#e8e8e8;font-size:0.85rem;outline:none;transition:border-color .2s;}
.input-group input:focus,.input-group select:focus{border-color:#ff5f1f;}

.env-rows{margin-top:8px;}
.env-row{display:flex;gap:6px;align-items:center;margin-bottom:6px;}
.env-row input{flex:1;padding:6px 10px;background:#0d0d0d;border:1px solid #2a2a2a;border-radius:4px;color:#e8e8e8;font-size:0.8rem;outline:none;font-family:monospace;}
.env-row input:focus{border-color:#ff5f1f;}
.env-row button{padding:4px 10px;background:#2a1515;border:1px solid #4a2020;border-radius:4px;color:#ff4444;cursor:pointer;font-size:0.8rem;}

.yaml-output{background:#0d0d0d;border:1px solid #2a2a2a;border-radius:8px;padding:16px;font-family:'Courier New',monospace;font-size:0.82rem;color:#8f8;white-space:pre-wrap;word-break:break-all;line-height:1.7;max-height:600px;overflow-y:auto;}

.btn-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px;}
.btn{padding:10px 20px;border:none;border-radius:8px;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all .2s;}
.btn-primary{background:#ff5f1f;color:#fff;}
.btn-primary:hover{background:#e5500a;}
.btn-secondary{background:#222;color:#e8e8e8;border:1px solid #333;}
.btn-secondary:hover{background:#333;}
.btn-green{background:#10b981;color:#fff;}
.btn-green:hover{background:#0d9668;}
.btn-danger{background:#2a1515;color:#ff4444;border:1px solid #4a2020;}
.btn-danger:hover{background:#3a1515;}
.btn.copied{background:#22aa44 !important;color:#fff !important;}
.btn-sm{padding:6px 14px;font-size:0.8rem;}

.presets{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:20px;}
.preset-btn{padding:8px 16px;background:#1a1a1a;border:1px solid #2a2a2a;border-radius:20px;color:#888;font-size:0.85rem;cursor:pointer;transition:all .2s;font-weight:500;}
.preset-btn:hover{border-color:#ff5f1f;color:#ff5f1f;}

.stats-row{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap;}
.stat-item{background:#1a1a1a;border:1px solid #2a2a2a;border-radius:8px;padding:12px 16px;text-align:center;flex:1;min-width:100px;}
.stat-item .num{font-size:1.5rem;font-weight:700;color:#ff5f1f;}
.stat-item .lbl{font-size:0.75rem;color:#888;margin-top:2px;}

.cross-sell{background:linear-gradient(135deg,#1a0800,#0a0a0a);border:1px solid #ff5f1f33;border-radius:10px;padding:24px;text-align:center;margin-top:40px;}
.cross-sell h3{color:#ff5f1f;margin-bottom:8px;font-size:1.1rem;}
.cross-sell p{color:#888;margin-bottom:16px;font-size:0.9rem;}
.cross-sell a{display:inline-block;padding:10px 28px;background:#ff5f1f;color:#fff;border-radius:8px;font-weight:600;transition:background .2s;}
.cross-sell a:hover{background:#e5500a;text-decoration:none;}

footer{text-align:center;padding:20px;color:#444;font-size:0.8rem;border-top:1px solid #1a1a1a;}

.usage-badge{display:inline-flex;align-items:center;gap:6px;background:#1a1a1a;border:1px solid #333;border-radius:20px;padding:4px 12px;font-size:0.75rem;color:#ff5f1f;font-weight:600;margin-bottom:1rem;}
.usage-badge-wrap{text-align:center;}

.sa-email-bar{position:fixed;bottom:0;left:0;right:0;background:#111;border-top:1px solid #333;padding:12px 20px;display:flex;align-items:center;justify-content:center;gap:12px;z-index:9999;transform:translateY(100%);transition:transform 0.4s ease;flex-wrap:wrap;}
.sa-email-bar.show{transform:translateY(0);}
.sa-email-bar p{color:#ccc;font-size:0.85rem;margin:0;}
.sa-email-bar input[type="email"]{padding:8px 12px;background:#1a1a1a;border:1px solid #333;border-radius:6px;color:#e8e8e8;font-size:0.85rem;outline:none;min-width:200px;}
.sa-email-bar input[type="email"]:focus{border-color:#ff5f1f;}
.sa-email-bar button.sa-sub-btn{padding:8px 18px;background:#ff5f1f;color:#fff;border:none;border-radius:6px;font-weight:700;font-size:0.85rem;cursor:pointer;white-space:nowrap;}
.sa-email-bar button.sa-sub-btn:hover{background:#e5520f;}
.sa-email-bar button.sa-dismiss{background:none;border:none;color:#666;font-size:1.2rem;cursor:pointer;padding:0 4px;line-height:1;}
.sa-email-bar button.sa-dismiss:hover{color:#fff;}

@media(max-width:768px){
  h1{font-size:1.5rem;}
  .service-grid{grid-template-columns:1fr 1fr;}
  .service-config-grid{grid-template-columns:1fr;}
  .stats-row{gap:10px;}
}
@media(max-width:500px){
  .service-grid{grid-template-columns:1fr;}
}
</style>
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebApplication","name":"Docker Compose Generator","description":"Free Docker Compose YAML generator. Pick services, configure ports and volumes, generate docker-compose.yml instantly.","url":"https://spunkart.com/docker-compose-generator.html","applicationCategory":"UtilitiesApplication","operatingSystem":"Any","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"author":{"@type":"Organization","name":"SpunkArt","url":"https://spunkart.com"}}</script>
</head>
<body>

<nav>
  <a href="/" class="nav-brand">SPUNKART.COM</a>
  <div class="nav-links">
    <a href="/store">All Tools</a>
    <a href="/store#free-tools">Free Tools</a>
    <a href="/reseller" style="color:#10b981;font-weight:700">Resell $$</a>
    <a href="/blog">Blog</a>
  </div>
</nav>

<main>
  <h1>Docker Compose <span>Generator</span></h1>
  <p class="subtitle">Pick services, configure ports and volumes, generate a production-ready docker-compose.yml file instantly.</p>
  <div class="usage-badge-wrap"><div class="usage-badge" id="usageBadge"></div></div>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-item"><div class="num" id="serviceCount">0</div><div class="lbl">Services</div></div>
    <div class="stat-item"><div class="num" id="lineCount">0</div><div class="lbl">YAML Lines</div></div>
    <div class="stat-item"><div class="num" id="volumeCount">0</div><div class="lbl">Volumes</div></div>
  </div>

  <!-- Presets -->
  <div class="section">
    <h2>Quick Stacks</h2>
    <div class="presets" id="presets"></div>
  </div>

  <!-- Service Picker -->
  <div class="section">
    <h2>Add Services</h2>
    <div class="service-grid" id="serviceGrid"></div>
  </div>

  <!-- Active Service Configs -->
  <div class="active-services" id="activeServices"></div>

  <!-- YAML Output -->
  <div class="section">
    <h2>Generated docker-compose.yml</h2>
    <div class="yaml-output" id="yamlOutput"></div>
    <div class="btn-row">
      <button class="btn btn-primary" id="copyBtn" onclick="copyYaml()">Copy YAML</button>
      <button class="btn btn-green" onclick="downloadYaml()">Download .yml</button>
      <button class="btn btn-secondary" onclick="clearAll()">Clear All</button>
    </div>
  </div>

  <div class="cross-sell">
    <h3>Get All 40+ Tools</h3>
    <p>Lifetime Pass ($99.99) gets every tool we build. Or <a href="/reseller" style="color:#10b981;font-weight:700">resell them all</a> under your brand from $99.</p>
    <a href="https://spunkart.com/store" class="cta">Visit the Store</a>
  </div>
</main>

<footer>&copy; 2026 SPUNKART.COM &mdash; <a href="/store" style="color:#ff5f1f">Store</a> &middot; <a href="/reseller" style="color:#10b981">Reseller</a> &middot; <a href="/blog" style="color:#888">Blog</a> &middot; <a href="https://twitter.com/SpunkArt13" style="color:#888">@SpunkArt13</a></footer>
<div class="watermark">SPUNKART.COM</div>

<script>
(function(){
  'use strict';

  /* ─── Service Templates ─── */
  var serviceTemplates = {
    nginx: { icon:'\ud83c\udf10', name:'Nginx', desc:'Web server & reverse proxy', image:'nginx:alpine', ports:[{host:'80',container:'80'}], volumes:[{host:'./nginx.conf',container:'/etc/nginx/nginx.conf'}], env:[], restart:'unless-stopped' },
    postgres: { icon:'\ud83d\udc18', name:'PostgreSQL', desc:'Relational database', image:'postgres:16-alpine', ports:[{host:'5432',container:'5432'}], volumes:[{host:'postgres_data',container:'/var/lib/postgresql/data'}], env:[{key:'POSTGRES_DB',val:'myapp'},{key:'POSTGRES_USER',val:'postgres'},{key:'POSTGRES_PASSWORD',val:'changeme'}], restart:'unless-stopped' },
    mysql: { icon:'\ud83d\uddc4', name:'MySQL', desc:'Relational database', image:'mysql:8', ports:[{host:'3306',container:'3306'}], volumes:[{host:'mysql_data',container:'/var/lib/mysql'}], env:[{key:'MYSQL_ROOT_PASSWORD',val:'changeme'},{key:'MYSQL_DATABASE',val:'myapp'}], restart:'unless-stopped' },
    redis: { icon:'\u26a1', name:'Redis', desc:'In-memory cache & broker', image:'redis:7-alpine', ports:[{host:'6379',container:'6379'}], volumes:[{host:'redis_data',container:'/data'}], env:[], restart:'unless-stopped', command:'redis-server --appendonly yes' },
    mongo: { icon:'\ud83c\udf43', name:'MongoDB', desc:'NoSQL document database', image:'mongo:7', ports:[{host:'27017',container:'27017'}], volumes:[{host:'mongo_data',container:'/data/db'}], env:[{key:'MONGO_INITDB_ROOT_USERNAME',val:'root'},{key:'MONGO_INITDB_ROOT_PASSWORD',val:'changeme'}], restart:'unless-stopped' },
    node: { icon:'\ud83d\udfe2', name:'Node.js', desc:'JavaScript runtime', image:'node:20-alpine', ports:[{host:'3000',container:'3000'}], volumes:[{host:'./app',container:'/app'},{host:'./app/node_modules',container:'/app/node_modules'}], env:[{key:'NODE_ENV',val:'production'}], restart:'unless-stopped', workingDir:'/app', command:'npm start' },
    python: { icon:'\ud83d\udc0d', name:'Python', desc:'Python runtime / Django / Flask', image:'python:3.12-slim', ports:[{host:'8000',container:'8000'}], volumes:[{host:'./app',container:'/app'}], env:[{key:'PYTHONUNBUFFERED',val:'1'}], restart:'unless-stopped', workingDir:'/app', command:'python manage.py runserver 0.0.0.0:8000' },
    rabbitmq: { icon:'\ud83d\udc30', name:'RabbitMQ', desc:'Message broker', image:'rabbitmq:3-management-alpine', ports:[{host:'5672',container:'5672'},{host:'15672',container:'15672'}], volumes:[{host:'rabbitmq_data',container:'/var/lib/rabbitmq'}], env:[{key:'RABBITMQ_DEFAULT_USER',val:'admin'},{key:'RABBITMQ_DEFAULT_PASS',val:'changeme'}], restart:'unless-stopped' },
    elasticsearch: { icon:'\ud83d\udd0d', name:'Elasticsearch', desc:'Search & analytics engine', image:'elasticsearch:8.12.0', ports:[{host:'9200',container:'9200'}], volumes:[{host:'es_data',container:'/usr/share/elasticsearch/data'}], env:[{key:'discovery.type',val:'single-node'},{key:'ES_JAVA_OPTS',val:'-Xms512m -Xmx512m'},{key:'xpack.security.enabled',val:'false'}], restart:'unless-stopped' },
    traefik: { icon:'\ud83d\udea6', name:'Traefik', desc:'Reverse proxy & load balancer', image:'traefik:v3.0', ports:[{host:'80',container:'80'},{host:'443',container:'443'},{host:'8080',container:'8080'}], volumes:[{host:'/var/run/docker.sock',container:'/var/run/docker.sock'},{host:'./traefik.yml',container:'/etc/traefik/traefik.yml'}], env:[], restart:'unless-stopped', command:'--api.insecure=true --providers.docker' },
    adminer: { icon:'\ud83d\udcca', name:'Adminer', desc:'Database management UI', image:'adminer:latest', ports:[{host:'8080',container:'8080'}], volumes:[], env:[], restart:'unless-stopped' },
    mailhog: { icon:'\ud83d\udce7', name:'MailHog', desc:'Email testing tool', image:'mailhog/mailhog:latest', ports:[{host:'1025',container:'1025'},{host:'8025',container:'8025'}], volumes:[], env:[], restart:'unless-stopped' }
  };

  var presets = {
    'MERN Stack': ['node','mongo','nginx','redis'],
    'Django + Postgres': ['python','postgres','redis','nginx'],
    'WordPress': ['nginx','mysql','redis'],
    'Node + Postgres': ['node','postgres','redis','nginx'],
    'Full Monitoring': ['elasticsearch','nginx','redis','rabbitmq'],
    'API Gateway': ['traefik','node','postgres','redis']
  };

  var activeServices = {};

  /* ─── Render Service Grid ─── */
  function renderGrid(){
    var grid = document.getElementById('serviceGrid');
    grid.innerHTML = '';
    Object.keys(serviceTemplates).forEach(function(key){
      var svc = serviceTemplates[key];
      var card = document.createElement('div');
      card.className = 'service-card' + (activeServices[key] ? ' active' : '');
      card.innerHTML = '<div class="icon">' + svc.icon + '</div><div class="name">' + svc.name + '</div><div class="desc">' + svc.desc + '</div>';
      card.addEventListener('click', function(){
        if(activeServices[key]){
          delete activeServices[key];
        } else {
          activeServices[key] = JSON.parse(JSON.stringify(svc));
        }
        renderGrid();
        renderConfigs();
        generateYaml();
        bumpUsage();
      });
      grid.appendChild(card);
    });
  }

  /* ─── Render Presets ─── */
  function renderPresets(){
    var container = document.getElementById('presets');
    container.innerHTML = '';
    Object.keys(presets).forEach(function(name){
      var btn = document.createElement('div');
      btn.className = 'preset-btn';
      btn.textContent = name;
      btn.addEventListener('click', function(){
        activeServices = {};
        presets[name].forEach(function(k){
          activeServices[k] = JSON.parse(JSON.stringify(serviceTemplates[k]));
        });
        renderGrid();
        renderConfigs();
        generateYaml();
        bumpUsage();
      });
      container.appendChild(btn);
    });
  }

  /* ─── Render Service Configs ─── */
  function renderConfigs(){
    var container = document.getElementById('activeServices');
    container.innerHTML = '';
    Object.keys(activeServices).forEach(function(key){
      var svc = activeServices[key];
      var div = document.createElement('div');
      div.className = 'service-config';

      var html = '<div class="service-config-header"><h3>' + svc.icon + ' ' + svc.name + '</h3><button class="btn btn-danger btn-sm" onclick="removeService(\'' + key + '\')">Remove</button></div>';
      html += '<div class="service-config-grid">';
      html += '<div class="input-group"><label>Image</label><input type="text" value="' + svc.image + '" data-svc="' + key + '" data-field="image"></div>';
      html += '<div class="input-group"><label>Restart Policy</label><select data-svc="' + key + '" data-field="restart"><option value="no"' + (svc.restart==='no'?' selected':'') + '>no</option><option value="always"' + (svc.restart==='always'?' selected':'') + '>always</option><option value="unless-stopped"' + (svc.restart==='unless-stopped'?' selected':'') + '>unless-stopped</option><option value="on-failure"' + (svc.restart==='on-failure'?' selected':'') + '>on-failure</option></select></div>';

      // Ports
      html += '<div class="input-group" style="grid-column:1/-1;"><label>Ports (host:container)</label><div class="env-rows">';
      svc.ports.forEach(function(p, i){
        html += '<div class="env-row"><input type="text" value="' + p.host + '" placeholder="Host port" data-svc="' + key + '" data-type="port-host" data-idx="' + i + '"><span style="color:#555;">:</span><input type="text" value="' + p.container + '" placeholder="Container port" data-svc="' + key + '" data-type="port-container" data-idx="' + i + '"><button onclick="removePort(\'' + key + '\',' + i + ')">X</button></div>';
      });
      html += '</div><button class="btn btn-secondary btn-sm" style="margin-top:6px;" onclick="addPort(\'' + key + '\')">+ Add Port</button></div>';

      // Volumes
      html += '<div class="input-group" style="grid-column:1/-1;"><label>Volumes (host:container)</label><div class="env-rows">';
      svc.volumes.forEach(function(v, i){
        html += '<div class="env-row"><input type="text" value="' + v.host + '" placeholder="Host path" data-svc="' + key + '" data-type="vol-host" data-idx="' + i + '"><span style="color:#555;">:</span><input type="text" value="' + v.container + '" placeholder="Container path" data-svc="' + key + '" data-type="vol-container" data-idx="' + i + '"><button onclick="removeVolume(\'' + key + '\',' + i + ')">X</button></div>';
      });
      html += '</div><button class="btn btn-secondary btn-sm" style="margin-top:6px;" onclick="addVolume(\'' + key + '\')">+ Add Volume</button></div>';

      // Environment
      html += '<div class="input-group" style="grid-column:1/-1;"><label>Environment Variables</label><div class="env-rows">';
      svc.env.forEach(function(e, i){
        html += '<div class="env-row"><input type="text" value="' + e.key + '" placeholder="KEY" data-svc="' + key + '" data-type="env-key" data-idx="' + i + '"><span style="color:#555;">=</span><input type="text" value="' + e.val + '" placeholder="value" data-svc="' + key + '" data-type="env-val" data-idx="' + i + '"><button onclick="removeEnv(\'' + key + '\',' + i + ')">X</button></div>';
      });
      html += '</div><button class="btn btn-secondary btn-sm" style="margin-top:6px;" onclick="addEnv(\'' + key + '\')">+ Add Variable</button></div>';

      html += '</div>';
      div.innerHTML = html;

      // Attach listeners
      div.querySelectorAll('input, select').forEach(function(input){
        var svcKey = input.dataset.svc;
        var field = input.dataset.field;
        var type = input.dataset.type;
        var idx = parseInt(input.dataset.idx);

        input.addEventListener('input', function(){
          if(field === 'image') activeServices[svcKey].image = input.value;
          else if(field === 'restart') activeServices[svcKey].restart = input.value;
          else if(type === 'port-host') activeServices[svcKey].ports[idx].host = input.value;
          else if(type === 'port-container') activeServices[svcKey].ports[idx].container = input.value;
          else if(type === 'vol-host') activeServices[svcKey].volumes[idx].host = input.value;
          else if(type === 'vol-container') activeServices[svcKey].volumes[idx].container = input.value;
          else if(type === 'env-key') activeServices[svcKey].env[idx].key = input.value;
          else if(type === 'env-val') activeServices[svcKey].env[idx].val = input.value;
          generateYaml();
        });
        input.addEventListener('change', function(){
          if(field === 'restart') activeServices[svcKey].restart = input.value;
          generateYaml();
        });
      });

      container.appendChild(div);
    });
  }

  /* ─── Add/Remove helpers ─── */
  window.removeService = function(key){ delete activeServices[key]; renderGrid(); renderConfigs(); generateYaml(); };
  window.addPort = function(key){ activeServices[key].ports.push({host:'',container:''}); renderConfigs(); generateYaml(); };
  window.removePort = function(key,i){ activeServices[key].ports.splice(i,1); renderConfigs(); generateYaml(); };
  window.addVolume = function(key){ activeServices[key].volumes.push({host:'',container:''}); renderConfigs(); generateYaml(); };
  window.removeVolume = function(key,i){ activeServices[key].volumes.splice(i,1); renderConfigs(); generateYaml(); };
  window.addEnv = function(key){ activeServices[key].env.push({key:'',val:''}); renderConfigs(); generateYaml(); };
  window.removeEnv = function(key,i){ activeServices[key].env.splice(i,1); renderConfigs(); generateYaml(); };

  /* ─── Generate YAML ─── */
  function generateYaml(){
    var keys = Object.keys(activeServices);
    if(keys.length === 0){
      document.getElementById('yamlOutput').textContent = '# Select services above to generate docker-compose.yml';
      document.getElementById('serviceCount').textContent = '0';
      document.getElementById('lineCount').textContent = '0';
      document.getElementById('volumeCount').textContent = '0';
      return;
    }

    var lines = [];
    var namedVolumes = [];

    lines.push('# Generated by SPUNKART.COM Docker Compose Generator');
    lines.push('# https://spunkart.com/docker-compose-generator.html');
    lines.push('');
    lines.push('services:');

    keys.forEach(function(key){
      var svc = activeServices[key];
      lines.push('  ' + key + ':');
      lines.push('    image: ' + svc.image);

      if(svc.command) lines.push('    command: ' + svc.command);
      if(svc.workingDir) lines.push('    working_dir: ' + svc.workingDir);
      lines.push('    restart: ' + svc.restart);

      if(svc.ports.length > 0){
        lines.push('    ports:');
        svc.ports.forEach(function(p){
          if(p.host && p.container) lines.push('      - "' + p.host + ':' + p.container + '"');
        });
      }

      if(svc.volumes.length > 0){
        lines.push('    volumes:');
        svc.volumes.forEach(function(v){
          if(v.host && v.container){
            lines.push('      - ' + v.host + ':' + v.container);
            // Track named volumes (no ./ or / prefix)
            if(v.host && !v.host.startsWith('./') && !v.host.startsWith('/') && v.host.indexOf('.') === -1){
              if(namedVolumes.indexOf(v.host) === -1) namedVolumes.push(v.host);
            }
          }
        });
      }

      if(svc.env.length > 0){
        lines.push('    environment:');
        svc.env.forEach(function(e){
          if(e.key) lines.push('      ' + e.key + ': ' + (e.val || '""'));
        });
      }

      // Add depends_on for common patterns
      var deps = [];
      if(key === 'node' || key === 'python'){
        if(activeServices.postgres) deps.push('postgres');
        if(activeServices.mysql) deps.push('mysql');
        if(activeServices.mongo) deps.push('mongo');
        if(activeServices.redis) deps.push('redis');
      }
      if(key === 'nginx'){
        if(activeServices.node) deps.push('node');
        if(activeServices.python) deps.push('python');
      }
      if(deps.length > 0){
        lines.push('    depends_on:');
        deps.forEach(function(d){ lines.push('      - ' + d); });
      }

      // Networks
      lines.push('    networks:');
      lines.push('      - app-network');
      lines.push('');
    });

    // Named volumes
    if(namedVolumes.length > 0){
      lines.push('volumes:');
      namedVolumes.forEach(function(v){
        lines.push('  ' + v + ':');
        lines.push('    driver: local');
      });
      lines.push('');
    }

    // Networks
    lines.push('networks:');
    lines.push('  app-network:');
    lines.push('    driver: bridge');

    var yaml = lines.join('\n');
    document.getElementById('yamlOutput').textContent = yaml;
    document.getElementById('serviceCount').textContent = keys.length;
    document.getElementById('lineCount').textContent = lines.length;
    document.getElementById('volumeCount').textContent = namedVolumes.length;
  }

  /* ─── Copy / Download ─── */
  window.copyYaml = function(){
    var text = document.getElementById('yamlOutput').textContent;
    navigator.clipboard.writeText(text).then(function(){
      var btn = document.getElementById('copyBtn');
      btn.textContent = 'Copied!';
      btn.classList.add('copied');
      setTimeout(function(){ btn.textContent = 'Copy YAML'; btn.classList.remove('copied'); }, 2000);
      gtag('event', 'copy_docker_compose', { event_category: 'tool_use' });
    });
  };

  window.downloadYaml = function(){
    var text = document.getElementById('yamlOutput').textContent;
    var blob = new Blob([text], { type: 'text/yaml' });
    var url = URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = url;
    a.download = 'docker-compose.yml';
    a.click();
    URL.revokeObjectURL(url);
    gtag('event', 'download_docker_compose', { event_category: 'tool_use' });
  };

  window.clearAll = function(){
    activeServices = {};
    renderGrid();
    renderConfigs();
    generateYaml();
  };

  /* ─── Usage Counter ─── */
  var TOOL_KEY = 'spunkart_docker_uses';
  var BAR_KEY = 'sa_bar_dismissed_docker';
  var usageCount = parseInt(localStorage.getItem(TOOL_KEY)) || 0;
  var badge = document.getElementById('usageBadge');

  function updateBadge(){
    badge.textContent = usageCount + ' compose file' + (usageCount !== 1 ? 's' : '') + ' built';
  }
  updateBadge();

  function bumpUsage(){
    usageCount++;
    localStorage.setItem(TOOL_KEY, usageCount);
    updateBadge();
    if(usageCount >= 3 && !localStorage.getItem(BAR_KEY)){
      document.getElementById('saEmailBar').classList.add('show');
    }
  }

  /* ─── Email Bar ─── */
  window.saDismissBar = function(){
    document.getElementById('saEmailBar').classList.remove('show');
    localStorage.setItem(BAR_KEY, '1');
  };
  window.saSubmitEmail = function(){
    var email = document.getElementById('saBarEmail').value;
    if(!email || !email.includes('@')){ alert('Please enter a valid email.'); return; }
    localStorage.setItem('sa_subscriber_email', email);
    localStorage.setItem(BAR_KEY, '1');
    window.open('https://embeds.beehiiv.com/6831d05b-f121-4e0d-951b-16f88ddd9ec3?email=' + encodeURIComponent(email), '_blank');
    document.getElementById('saEmailBar').classList.remove('show');
    var btn = document.querySelector('.sa-sub-btn');
    btn.textContent = 'Subscribed!';
    btn.style.background = '#10b981';
  };

  /* ─── Init ─── */
  renderPresets();
  renderGrid();
  generateYaml();

})();
</script>

<!-- Email collection bar -->
<div class="sa-email-bar" id="saEmailBar">
  <p>Like this? Get 30 more free tools in your inbox.</p>
  <input type="email" id="saBarEmail" placeholder="you@email.com">
  <button class="sa-sub-btn" onclick="saSubmitEmail()">Get Early Access</button>
  <button class="sa-dismiss" onclick="saDismissBar()">&times;</button>
</div>

<!-- Code Protection -->
<script>
(function(){
  document.addEventListener('contextmenu',function(e){e.preventDefault();});
  document.addEventListener('keydown',function(e){
    if(e.key==='F12')e.preventDefault();
    if(e.ctrlKey&&e.key==='u')e.preventDefault();
    if(e.ctrlKey&&e.key==='s')e.preventDefault();
    if(e.ctrlKey&&e.shiftKey&&(e.key==='I'||e.key==='i'||e.key==='J'||e.key==='j'||e.key==='C'||e.key==='c'))e.preventDefault();
  });
  console.log('%c\u26a0 SPUNKART.COM \u2014 All rights reserved. Unauthorized copying or redistribution of this code is prohibited.','color:#ff5f1f;font-size:16px;font-weight:bold;');
  console.log('%cThis tool is the property of SpunkArt. Report theft: hello@spunkart.com','color:#888;font-size:12px;');
  if(!document.querySelector('.watermark')){
    var w=document.createElement('div');
    w.style.cssText='position:fixed;bottom:10px;right:15px;font-size:0.7rem;color:rgba(255,95,31,0.15);font-weight:700;letter-spacing:2px;pointer-events:none;z-index:9999;';
    w.textContent='SPUNKART.COM';
    document.body.appendChild(w);
  }
})();
</script>
</body>
</html>