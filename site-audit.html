<!DOCTYPE html>
<html lang="en">
<head>
<!-- Copyright 2026 SpunkArt.com. All rights reserved. Unauthorized reproduction prohibited. hello@spunkart.com -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Site Audit Tool - SEO & Meta Tag Checker | SPUNKART.COM</title>
<meta name="description" content="Audit any website instantly. Check meta tags, Open Graph, mobile viewport, Schema.org, headings, links, images, and more. Get a scorecard with actionable fixes. Free tool.">
<meta property="og:title" content="Quick Site Audit Tool - SEO & Meta Tag Checker">
<meta property="og:description" content="Audit any website for meta tags, OG tags, mobile viewport, schema, and SEO issues. Free instant scorecard by SPUNKART.COM">
<meta property="og:image" content="https://spunk.codes/assets/og-site-audit.png">
<meta property="og:url" content="https://spunk.codes/site-audit.html">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@SpunkArt13">
<meta name="twitter:title" content="Quick Site Audit Tool - Free SEO Checker">
<meta name="twitter:description" content="Audit any website for SEO issues, meta tags, OG tags, schema markup. Free instant scorecard by SPUNKART.COM">
<link rel="canonical" href="https://spunk.codes/site-audit.html">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Quick Site Audit Tool",
  "description": "Audit any website for meta tags, Open Graph, mobile viewport, Schema.org, headings, and more. Instant scorecard.",
  "url": "https://spunk.codes/site-audit.html",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
  "author": { "@type": "Organization", "name": "SpunkArt.com", "url": "https://spunk.codes" }
}
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GVNL11PEGP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-GVNL11PEGP');</script>
<script type="text/javascript">(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window,document,"clarity","script","pn0x1z2y3w");</script>
<meta name="author" content="SpunkArt.com">
<meta name="copyright" content="Copyright 2026 SpunkArt.com. All rights reserved.">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#0a0a0a;color:#e8e8e8;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;line-height:1.6;min-height:100vh;display:flex;flex-direction:column;}
a{color:#ff5f1f;text-decoration:none;}a:hover{text-decoration:underline;}
nav{background:#111;border-bottom:1px solid #222;padding:12px 24px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px;position:sticky;top:0;z-index:100;}
nav .logo{font-weight:800;font-size:1.1rem;color:#ff5f1f;letter-spacing:1px;}
nav .links{display:flex;gap:20px;font-size:0.9rem;}
nav .links a{color:#ccc;}nav .links a:hover{color:#ff5f1f;}
main{flex:1;max-width:960px;width:100%;margin:0 auto;padding:32px 20px 80px;}
h1{font-size:2rem;margin-bottom:8px;color:#fff;}
h1 span{color:#ff5f1f;}
h2{font-size:1.2rem;color:#fff;margin:24px 0 16px;}
.subtitle{color:#999;margin-bottom:24px;font-size:1rem;}
.usage-badge{display:inline-block;background:#1a1a1a;border:1px solid #333;border-radius:20px;padding:4px 14px;font-size:12px;color:#888;margin-bottom:24px;}
.usage-badge strong{color:#ff5f1f;}
.url-form{display:flex;gap:10px;margin-bottom:32px;flex-wrap:wrap;}
.url-form input{flex:1;min-width:200px;background:#111;border:1px solid #333;border-radius:8px;padding:14px 16px;color:#e8e8e8;font-size:1rem;outline:none;}
.url-form input:focus{border-color:#ff5f1f;}
.btn{background:#ff5f1f;color:#fff;border:none;padding:14px 28px;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:background .2s;white-space:nowrap;}
.btn:hover{background:#e5520f;}
.btn:disabled{opacity:0.5;cursor:not-allowed;}
.btn-secondary{background:#222;color:#ccc;border:1px solid #333;}
.btn-secondary:hover{background:#333;color:#fff;}
.loading{display:none;text-align:center;padding:40px;color:#888;}
.loading .spinner{width:40px;height:40px;border:3px solid #333;border-top:3px solid #ff5f1f;border-radius:50%;animation:spin 0.8s linear infinite;margin:0 auto 16px;}
@keyframes spin{to{transform:rotate(360deg);}}
.results{display:none;}
.score-hero{text-align:center;margin-bottom:32px;padding:32px;background:#111;border:1px solid #222;border-radius:16px;}
.score-circle{position:relative;width:160px;height:160px;margin:0 auto 16px;}
.score-circle canvas{width:160px;height:160px;}
.score-number{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2.5rem;font-weight:900;}
.score-grade{font-size:1.2rem;font-weight:700;margin-bottom:4px;}
.score-summary{color:#888;font-size:0.9rem;}
.category-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-bottom:32px;}
.cat-card{background:#111;border:1px solid #222;border-radius:12px;padding:18px;cursor:pointer;transition:border-color .2s;}
.cat-card:hover{border-color:#333;}
.cat-card .cat-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;}
.cat-card .cat-name{font-size:0.85rem;font-weight:700;}
.cat-card .cat-score{font-size:1.3rem;font-weight:800;}
.cat-card .cat-score.pass{color:#10b981;}
.cat-card .cat-score.warn{color:#f59e0b;}
.cat-card .cat-score.fail{color:#ef4444;}
.cat-card .cat-bar{height:4px;background:#222;border-radius:2px;overflow:hidden;}
.cat-card .cat-bar-fill{height:100%;border-radius:2px;transition:width .6s;}
.check-list{margin-bottom:24px;}
.check-item{display:flex;align-items:flex-start;gap:10px;padding:12px 16px;background:#111;border:1px solid #1a1a1a;border-radius:8px;margin-bottom:6px;font-size:0.9rem;}
.check-item .icon{font-size:1rem;min-width:20px;text-align:center;margin-top:2px;}
.check-item .icon.pass{color:#10b981;}
.check-item .icon.warn{color:#f59e0b;}
.check-item .icon.fail{color:#ef4444;}
.check-item .check-content{flex:1;}
.check-item .check-title{font-weight:600;margin-bottom:2px;}
.check-item .check-detail{font-size:0.8rem;color:#888;}
.check-item .check-value{font-family:'SF Mono',Monaco,Consolas,monospace;font-size:0.8rem;color:#666;background:#0d0d0d;padding:4px 8px;border-radius:4px;margin-top:4px;word-break:break-all;display:block;max-height:60px;overflow:hidden;}
.export-row{display:flex;gap:10px;margin-bottom:24px;flex-wrap:wrap;}
.btn-export{background:#1a1a1a;border:1px solid #333;border-radius:8px;padding:10px 20px;color:#e8e8e8;font-size:0.85rem;cursor:pointer;transition:all .2s;}
.btn-export:hover{border-color:#ff5f1f;color:#ff5f1f;}
.note-box{background:#1a1a0a;border:1px solid #333;border-left:3px solid #f59e0b;border-radius:8px;padding:14px 16px;margin-bottom:24px;font-size:0.85rem;color:#ccc;}
.note-box strong{color:#f59e0b;}
.cross-sell{background:linear-gradient(135deg,#1a1a1a,#222);border:1px solid #333;border-radius:12px;padding:24px;text-align:center;margin-top:40px;}
.cross-sell h3{color:#ff5f1f;margin-bottom:8px;}.cross-sell p{color:#999;margin-bottom:16px;font-size:0.95rem;}
.cross-sell a.cta{display:inline-block;background:#ff5f1f;color:#fff;padding:12px 32px;border-radius:8px;font-weight:700;text-decoration:none;}.cross-sell a.cta:hover{background:#e5520f;text-decoration:none;}
.watermark{position:fixed;bottom:12px;right:16px;font-size:14px;font-weight:700;color:rgba(255,255,255,.1);pointer-events:none;z-index:50;}
.toast{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:#10b981;color:#fff;padding:10px 24px;border-radius:8px;font-size:14px;font-weight:600;z-index:200;display:none;animation:fadeUp .3s ease;}
@keyframes fadeUp{from{opacity:0;transform:translateX(-50%) translateY(10px);}to{opacity:1;transform:translateX(-50%) translateY(0);}}
.email-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:1000;align-items:center;justify-content:center;}
.email-overlay.show{display:flex;}
.email-popup{background:#151515;border:1px solid #333;border-radius:16px;padding:40px 32px;max-width:440px;width:90%;text-align:center;position:relative;}
.email-popup h2{color:#ff5f1f;margin-bottom:8px;font-size:1.4rem;}
.email-popup p{color:#999;margin-bottom:20px;font-size:0.95rem;}
.email-popup .close-popup{position:absolute;top:12px;right:16px;background:none;border:none;color:#666;font-size:1.3rem;cursor:pointer;}
footer{background:#111;border-top:1px solid #222;padding:16px 24px;text-align:center;font-size:0.8rem;color:#555;}
@media(max-width:600px){h1{font-size:1.5rem;}.url-form{flex-direction:column;}.category-cards{grid-template-columns:1fr 1fr;}}
</style>
</head>
<body>
<nav>
<a href="/" class="logo">SPUNKART</a>
<div class="links">
<a href="/store.html">Store</a>
<a href="/blog.html">Blog</a>
<a href="/index.html#tools">Free Tools</a>
</div>
</nav>

<main>
<h1>Quick <span>Site Audit</span> Tool</h1>
<p class="subtitle">Enter any URL to check meta tags, OG tags, mobile viewport, Schema.org, headings, and more. Instant scorecard with fixes.</p>
<div class="usage-badge">Audited <strong id="usageCount">0</strong> sites</div>

<div class="url-form">
<input type="url" id="urlInput" placeholder="https://example.com" value="">
<button class="btn" id="auditBtn" onclick="runAudit()">Run Audit</button>
</div>

<div class="note-box">
<strong>Note:</strong> This tool fetches your site's HTML via a CORS proxy and analyzes it client-side. For the most accurate results, test with publicly accessible URLs. Some checks may be limited by CORS restrictions.
</div>

<div class="loading" id="loading">
<div class="spinner"></div>
<p>Fetching and analyzing your site...</p>
</div>

<div class="results" id="results">
<div class="score-hero">
<div class="score-circle">
<canvas id="scoreCanvas" width="160" height="160"></canvas>
<div class="score-number" id="scoreNumber">0</div>
</div>
<div class="score-grade" id="scoreGrade">--</div>
<div class="score-summary" id="scoreSummary"></div>
</div>

<div class="category-cards" id="categoryCards"></div>

<div id="checkResults"></div>

<div class="export-row">
<button class="btn-export" onclick="exportText()">Copy Report as Text</button>
<button class="btn-export" onclick="exportJSON()">Export JSON</button>
</div>
</div>

<div class="cross-sell">
<h3>Fix Your SEO Fast</h3>
<p>Get the Site Empire ebook -- learn how to build, audit, and scale 100+ sites that rank.</p>
<a href="/ebook-site-empire.html" class="cta">Get the Ebook</a>
<br><br>
<a href="/store.html" style="color:#999;font-size:0.85rem;">Browse 80+ Free Tools &rarr;</a>
</div>
</main>

<div class="watermark">SPUNKART.COM</div>
<div class="toast" id="toast">Copied!</div>

<div class="email-overlay" id="emailOverlay">
<div class="email-popup">
<button class="close-popup" onclick="closePopup()">&times;</button>
<h2>SEO Tips Weekly</h2>
<p>Join 2,000+ solo founders getting free SEO tools, audits, and ranking strategies.</p>
<iframe src="https://embeds.beehiiv.com/a23fb2e5-bb3b-4ed4-884e-0ace68a5a55b?slim=true" data-test-id="beehiiv-embed" height="52" frameborder="0" scrolling="no" style="width:100%;border-radius:8px;margin-bottom:12px;"></iframe>
<button class="btn btn-secondary" onclick="closePopup()" style="padding:8px 16px;font-size:0.85rem;margin-top:8px;">Maybe later</button>
</div>
</div>

<footer>&copy; 2026 SpunkArt.com. All rights reserved.</footer>

<script>
(function(){document.addEventListener('contextmenu',e=>e.preventDefault());document.addEventListener('keydown',function(e){if(e.key==='F12'||(e.ctrlKey&&e.key==='u')||(e.ctrlKey&&e.shiftKey&&(e.key==='I'||e.key==='J'||e.key==='C'))){e.preventDefault();}});})();

let usage = parseInt(localStorage.getItem('siteaudit_usage') || '0');
document.getElementById('usageCount').textContent = usage;
let lastReport = {};

function incrementUsage() {
  usage++;
  localStorage.setItem('siteaudit_usage', usage);
  document.getElementById('usageCount').textContent = usage;
  if (usage === 3) showPopup();
}

async function runAudit() {
  let url = document.getElementById('urlInput').value.trim();
  if (!url) { showToast('Please enter a URL'); return; }
  if (!url.startsWith('http')) url = 'https://' + url;

  document.getElementById('loading').style.display = 'block';
  document.getElementById('results').style.display = 'none';
  document.getElementById('auditBtn').disabled = true;

  try {
    const proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);
    const response = await fetch(proxyUrl);
    const html = await response.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    analyzeHTML(doc, url, html);
    incrementUsage();
  } catch (err) {
    analyzeOffline(url);
    incrementUsage();
  }

  document.getElementById('loading').style.display = 'none';
  document.getElementById('results').style.display = 'block';
  document.getElementById('auditBtn').disabled = false;
  document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
}

function analyzeHTML(doc, url, rawHTML) {
  const checks = [];

  const title = doc.querySelector('title');
  const titleText = title ? title.textContent.trim() : '';
  checks.push({
    category: 'SEO Basics',
    name: 'Page Title',
    status: titleText ? (titleText.length >= 30 && titleText.length <= 60 ? 'pass' : 'warn') : 'fail',
    detail: titleText ? `"${titleText}" (${titleText.length} chars)` : 'Missing title tag',
    tip: titleText ? (titleText.length < 30 ? 'Title is short. Aim for 30-60 characters.' : titleText.length > 60 ? 'Title is long. Keep under 60 characters.' : 'Good length.') : 'Add a descriptive title tag.',
    value: titleText
  });

  const metaDesc = doc.querySelector('meta[name="description"]');
  const descText = metaDesc ? metaDesc.getAttribute('content') || '' : '';
  checks.push({
    category: 'SEO Basics',
    name: 'Meta Description',
    status: descText ? (descText.length >= 120 && descText.length <= 160 ? 'pass' : 'warn') : 'fail',
    detail: descText ? `${descText.length} characters` : 'Missing meta description',
    tip: descText ? (descText.length < 120 ? 'Too short. Aim for 120-160 chars.' : descText.length > 160 ? 'Too long. May get truncated in search results.' : 'Good length.') : 'Add a meta description for better click-through rates.',
    value: descText
  });

  const canonical = doc.querySelector('link[rel="canonical"]');
  checks.push({
    category: 'SEO Basics',
    name: 'Canonical URL',
    status: canonical ? 'pass' : 'warn',
    detail: canonical ? canonical.getAttribute('href') : 'No canonical tag found',
    tip: canonical ? 'Canonical URL is set.' : 'Add a canonical tag to prevent duplicate content issues.'
  });

  const h1s = doc.querySelectorAll('h1');
  checks.push({
    category: 'SEO Basics',
    name: 'H1 Heading',
    status: h1s.length === 1 ? 'pass' : h1s.length === 0 ? 'fail' : 'warn',
    detail: h1s.length === 0 ? 'No H1 found' : h1s.length === 1 ? `"${h1s[0].textContent.trim().substring(0, 80)}"` : `${h1s.length} H1 tags found (should be 1)`,
    tip: h1s.length === 1 ? 'Single H1 tag present.' : 'Use exactly one H1 tag per page.'
  });

  const h2s = doc.querySelectorAll('h2');
  checks.push({
    category: 'SEO Basics',
    name: 'H2 Headings',
    status: h2s.length > 0 ? 'pass' : 'warn',
    detail: `${h2s.length} H2 tags found`,
    tip: h2s.length > 0 ? 'Good heading structure.' : 'Add H2 subheadings for better content structure.'
  });

  const ogTitle = doc.querySelector('meta[property="og:title"]');
  const ogDesc = doc.querySelector('meta[property="og:description"]');
  const ogImage = doc.querySelector('meta[property="og:image"]');
  const ogUrl = doc.querySelector('meta[property="og:url"]');

  checks.push({
    category: 'Open Graph',
    name: 'OG Title',
    status: ogTitle ? 'pass' : 'fail',
    detail: ogTitle ? ogTitle.getAttribute('content') : 'Missing og:title',
    tip: ogTitle ? 'OG title is set.' : 'Add og:title for better social media sharing.'
  });
  checks.push({
    category: 'Open Graph',
    name: 'OG Description',
    status: ogDesc ? 'pass' : 'fail',
    detail: ogDesc ? ogDesc.getAttribute('content').substring(0, 100) : 'Missing og:description',
    tip: ogDesc ? 'OG description is set.' : 'Add og:description for social previews.'
  });
  checks.push({
    category: 'Open Graph',
    name: 'OG Image',
    status: ogImage ? 'pass' : 'fail',
    detail: ogImage ? ogImage.getAttribute('content') : 'Missing og:image',
    tip: ogImage ? 'OG image is set. Use 1200x630px for best results.' : 'Add an og:image for visual social cards.'
  });
  checks.push({
    category: 'Open Graph',
    name: 'OG URL',
    status: ogUrl ? 'pass' : 'warn',
    detail: ogUrl ? ogUrl.getAttribute('content') : 'Missing og:url',
    tip: ogUrl ? 'OG URL is set.' : 'Add og:url for canonical social sharing.'
  });

  const twCard = doc.querySelector('meta[name="twitter:card"]');
  const twTitle = doc.querySelector('meta[name="twitter:title"]');
  checks.push({
    category: 'Open Graph',
    name: 'Twitter Card',
    status: twCard ? 'pass' : 'warn',
    detail: twCard ? twCard.getAttribute('content') : 'Missing twitter:card',
    tip: twCard ? 'Twitter card is set.' : 'Add twitter:card for X/Twitter previews.'
  });

  const viewport = doc.querySelector('meta[name="viewport"]');
  checks.push({
    category: 'Mobile & Performance',
    name: 'Viewport Meta',
    status: viewport ? 'pass' : 'fail',
    detail: viewport ? viewport.getAttribute('content') : 'Missing viewport meta tag',
    tip: viewport ? 'Viewport is configured.' : 'Add viewport meta tag for mobile responsiveness.'
  });

  const charset = doc.querySelector('meta[charset]');
  checks.push({
    category: 'Mobile & Performance',
    name: 'Character Encoding',
    status: charset ? 'pass' : 'warn',
    detail: charset ? charset.getAttribute('charset') : 'No charset declared',
    tip: charset ? 'Charset is set.' : 'Add <meta charset="UTF-8"> for proper encoding.'
  });

  const htmlLang = doc.documentElement.getAttribute('lang');
  checks.push({
    category: 'Mobile & Performance',
    name: 'HTML Language',
    status: htmlLang ? 'pass' : 'warn',
    detail: htmlLang ? `lang="${htmlLang}"` : 'No lang attribute on <html>',
    tip: htmlLang ? 'Language is declared.' : 'Add lang attribute for accessibility and SEO.'
  });

  const images = doc.querySelectorAll('img');
  const imgsWithoutAlt = Array.from(images).filter(img => !img.getAttribute('alt'));
  checks.push({
    category: 'Mobile & Performance',
    name: 'Image Alt Text',
    status: imgsWithoutAlt.length === 0 ? 'pass' : 'warn',
    detail: `${images.length} images found, ${imgsWithoutAlt.length} missing alt text`,
    tip: imgsWithoutAlt.length === 0 ? 'All images have alt text.' : `Add alt text to ${imgsWithoutAlt.length} image(s) for accessibility and SEO.`
  });

  const htmlSize = new Blob([rawHTML]).size;
  checks.push({
    category: 'Mobile & Performance',
    name: 'HTML Size',
    status: htmlSize < 100000 ? 'pass' : htmlSize < 500000 ? 'warn' : 'fail',
    detail: (htmlSize / 1024).toFixed(1) + ' KB',
    tip: htmlSize < 100000 ? 'HTML is lightweight.' : 'Large HTML page. Consider code splitting or minification.'
  });

  const schema = rawHTML.includes('application/ld+json');
  checks.push({
    category: 'Schema & Structured Data',
    name: 'Schema.org JSON-LD',
    status: schema ? 'pass' : 'warn',
    detail: schema ? 'Structured data detected' : 'No JSON-LD found',
    tip: schema ? 'Schema.org markup is present.' : 'Add JSON-LD structured data for rich search results.'
  });

  const robotsMeta = doc.querySelector('meta[name="robots"]');
  checks.push({
    category: 'Schema & Structured Data',
    name: 'Robots Meta',
    status: 'pass',
    detail: robotsMeta ? robotsMeta.getAttribute('content') : 'No robots meta (defaults to index, follow)',
    tip: 'Page is indexable.'
  });

  const favicon = doc.querySelector('link[rel="icon"],link[rel="shortcut icon"]');
  checks.push({
    category: 'Schema & Structured Data',
    name: 'Favicon',
    status: favicon ? 'pass' : 'warn',
    detail: favicon ? favicon.getAttribute('href') : 'No favicon link found',
    tip: favicon ? 'Favicon is set.' : 'Add a favicon for brand recognition in browser tabs.'
  });

  const https = url.startsWith('https');
  checks.push({
    category: 'Security',
    name: 'HTTPS',
    status: https ? 'pass' : 'fail',
    detail: https ? 'Site uses HTTPS' : 'Site is not using HTTPS',
    tip: https ? 'Connection is secure.' : 'Migrate to HTTPS for security and SEO ranking.'
  });

  const mixedContent = rawHTML.includes('http://') && https;
  checks.push({
    category: 'Security',
    name: 'Mixed Content',
    status: !mixedContent ? 'pass' : 'warn',
    detail: mixedContent ? 'Potential mixed content detected' : 'No mixed content issues detected',
    tip: mixedContent ? 'Replace http:// references with https:// or protocol-relative URLs.' : 'Clean. No mixed content.'
  });

  renderResults(checks, url);
}

function analyzeOffline(url) {
  const checks = [
    { category: 'Connection', name: 'Fetch Status', status: 'fail', detail: 'Could not fetch the page. CORS or network restriction.', tip: 'The site may block external requests. Try a different URL or check if the site is online.' },
    { category: 'Connection', name: 'URL Format', status: url.startsWith('https') ? 'pass' : 'warn', detail: url, tip: 'Ensure the URL is correct and publicly accessible.' }
  ];
  renderResults(checks, url);
}

function renderResults(checks, url) {
  const categories = {};
  checks.forEach(c => {
    if (!categories[c.category]) categories[c.category] = [];
    categories[c.category].push(c);
  });

  let totalScore = 0;
  let totalChecks = checks.length;
  checks.forEach(c => {
    if (c.status === 'pass') totalScore += 10;
    else if (c.status === 'warn') totalScore += 5;
  });
  const score = Math.round((totalScore / (totalChecks * 10)) * 100);

  drawScoreCircle(score);
  document.getElementById('scoreNumber').textContent = score;
  document.getElementById('scoreNumber').style.color = score >= 80 ? '#10b981' : score >= 50 ? '#f59e0b' : '#ef4444';

  const grade = score >= 90 ? 'A+' : score >= 80 ? 'A' : score >= 70 ? 'B' : score >= 60 ? 'C' : score >= 50 ? 'D' : 'F';
  const gradeColor = score >= 80 ? '#10b981' : score >= 50 ? '#f59e0b' : '#ef4444';
  document.getElementById('scoreGrade').textContent = 'Grade: ' + grade;
  document.getElementById('scoreGrade').style.color = gradeColor;

  const passed = checks.filter(c => c.status === 'pass').length;
  const warnings = checks.filter(c => c.status === 'warn').length;
  const failed = checks.filter(c => c.status === 'fail').length;
  document.getElementById('scoreSummary').textContent = `${passed} passed, ${warnings} warnings, ${failed} failed out of ${totalChecks} checks`;

  let catCardsHTML = '';
  Object.keys(categories).forEach(cat => {
    const items = categories[cat];
    const catPassed = items.filter(i => i.status === 'pass').length;
    const catScore = Math.round((catPassed / items.length) * 100);
    const cls = catScore >= 80 ? 'pass' : catScore >= 50 ? 'warn' : 'fail';
    const barColor = catScore >= 80 ? '#10b981' : catScore >= 50 ? '#f59e0b' : '#ef4444';
    catCardsHTML += `<div class="cat-card"><div class="cat-header"><span class="cat-name">${cat}</span><span class="cat-score ${cls}">${catScore}%</span></div><div class="cat-bar"><div class="cat-bar-fill" style="width:${catScore}%;background:${barColor}"></div></div></div>`;
  });
  document.getElementById('categoryCards').innerHTML = catCardsHTML;

  let checksHTML = '';
  Object.keys(categories).forEach(cat => {
    checksHTML += `<h2>${cat}</h2><div class="check-list">`;
    categories[cat].forEach(c => {
      const icon = c.status === 'pass' ? '&#10003;' : c.status === 'warn' ? '&#9888;' : '&#10007;';
      checksHTML += `<div class="check-item"><span class="icon ${c.status}">${icon}</span><div class="check-content"><div class="check-title">${c.name}</div><div class="check-detail">${c.tip}</div>${c.value ? `<span class="check-value">${escapeHTML(c.value.substring(0, 200))}</span>` : `<span class="check-value">${escapeHTML(c.detail)}</span>`}</div></div>`;
    });
    checksHTML += '</div>';
  });
  document.getElementById('checkResults').innerHTML = checksHTML;

  lastReport = { url, score, grade, checks, timestamp: new Date().toISOString() };
}

function escapeHTML(str) {
  const div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

function drawScoreCircle(score) {
  const canvas = document.getElementById('scoreCanvas');
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, 160, 160);
  const cx = 80, cy = 80, r = 65;

  ctx.beginPath();
  ctx.arc(cx, cy, r, 0, Math.PI * 2);
  ctx.strokeStyle = '#222';
  ctx.lineWidth = 10;
  ctx.stroke();

  const angle = (score / 100) * Math.PI * 2 - Math.PI / 2;
  const color = score >= 80 ? '#10b981' : score >= 50 ? '#f59e0b' : '#ef4444';
  ctx.beginPath();
  ctx.arc(cx, cy, r, -Math.PI / 2, angle);
  ctx.strokeStyle = color;
  ctx.lineWidth = 10;
  ctx.lineCap = 'round';
  ctx.stroke();
}

function exportText() {
  const r = lastReport;
  let txt = `SITE AUDIT REPORT\nURL: ${r.url}\nScore: ${r.score}/100 (${r.grade})\nDate: ${new Date(r.timestamp).toLocaleDateString()}\n${'='.repeat(40)}\n\n`;
  r.checks.forEach(c => {
    const icon = c.status === 'pass' ? '[PASS]' : c.status === 'warn' ? '[WARN]' : '[FAIL]';
    txt += `${icon} ${c.name}: ${c.detail}\n`;
  });
  txt += `\nGenerated at SpunkArt.com/site-audit.html`;
  navigator.clipboard.writeText(txt);
  showToast('Report copied!');
}

function exportJSON() {
  const blob = new Blob([JSON.stringify(lastReport, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'site-audit-report.json';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('JSON downloaded!');
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.style.display = 'block';
  setTimeout(() => { t.style.display = 'none'; }, 2000);
}

function showPopup() {
  if (localStorage.getItem('siteaudit_subscribed')) return;
  document.getElementById('emailOverlay').classList.add('show');
}
function closePopup() {
  document.getElementById('emailOverlay').classList.remove('show');
  localStorage.setItem('siteaudit_subscribed', '1');
}

document.getElementById('urlInput').addEventListener('keydown', function(e) {
  if (e.key === 'Enter') runAudit();
});
</script>
</body>
</html>